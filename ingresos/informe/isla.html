<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Isla Dinámica iOS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        
        body {
            background-color: #000;
            color: #fff;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .iphone-frame {
            width: 390px;
            height: 844px;
            background-color: #1c1c1e;
            border-radius: 40px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(255, 255, 255, 0.1);
            border: 4px solid #2c2c2e;
        }
        
        .notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 130px;
            height: 35px;
            background-color: #000;
            border-radius: 0 0 20px 20px;
            z-index: 100;
        }
        
        .dynamic-island {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 130px;
            height: 40px;
            background-color: #000;
            border-radius: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            overflow: hidden;
            z-index: 101;
        }
        
        .dynamic-island.expanded {
            width: 250px;
            height: 60px;
        }
        
        .island-content {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 0 12px;
        }
        
        .battery-icon {
            width: 22px;
            height: 22px;
        }
        
        .battery-text {
            font-size: 14px;
            font-weight: 600;
        }
        
        .expanded-content {
            display: none;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }
        
        .expanded .default-content {
            display: none;
        }
        
        .expanded .expanded-content {
            display: flex;
        }
        
        .progress-bar {
            width: 200px;
            height: 5px;
            background-color: #3a3a3c;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: #64d2ff;
            border-radius: 3px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .percentage {
            font-size: 16px;
            font-weight: 600;
        }
        
        .status {
            font-size: 12px;
            color: #64d2ff;
        }
        
        .screen-content {
            padding: 80px 20px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }
        
        h1 {
            font-size: 24px;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            max-width: 300px;
        }
        
        .slider-container {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        label {
            font-size: 14px;
            color: #8e8e93;
        }
        
        input[type="range"] {
            width: 100%;
            height: 5px;
            -webkit-appearance: none;
            appearance: none;
            background: #3a3a3c;
            border-radius: 5px;
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #64d2ff;
            cursor: pointer;
        }
        
        .buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        button {
            padding: 10px 15px;
            border: none;
            border-radius: 10px;
            background-color: #64d2ff;
            color: #000;
            font-weight: 600;
            cursor: pointer;
            flex: 1;
            transition: opacity 0.2s;
        }
        
        button:hover {
            opacity: 0.9;
        }
        
        button:active {
            opacity: 0.8;
        }
        
        .explanation {
            max-width: 300px;
            margin-top: 30px;
            text-align: center;
            color: #8e8e93;
            font-size: 14px;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="iphone-frame">
        <div class="notch"></div>
        <div class="dynamic-island" id="dynamicIsland">
            <div class="island-content default-content">
                <svg class="battery-icon" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17 8H3C1.89543 8 1 8.89543 1 10V12C1 13.1046 1.89543 14 3 14H17C18.1046 14 19 13.1046 19 12V10C19 8.89543 18.1046 8 17 8Z" stroke="white" stroke-width="2"/>
                    <path d="M21 11V11.5" stroke="white" stroke-linecap="round"/>
                </svg>
                <span class="battery-text" id="batteryText">0%</span>
            </div>
            <div class="island-content expanded-content">
                <span class="percentage" id="expandedPercentage">0%</span>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="status" id="chargingStatus">Conectado</span>
            </div>
        </div>
        
        <div class="screen-content">
            <h1>Simulador de Carga<br>Isla Dinámica</h1>
            
            <div class="controls">
                <div class="slider-container">
                    <label for="batteryLevel">Nivel de Batería:</label>
                    <input type="range" id="batteryLevel" min="0" max="100" value="0">
                </div>
                
                <div class="slider-container">
                    <label for="animationSpeed">Velocidad de Animación:</label>
                    <input type="range" id="animationSpeed" min="1" max="10" value="5">
                </div>
                
                <div class="buttons">
                    <button id="startBtn">Iniciar Carga</button>
                    <button id="stopBtn">Detener</button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="explanation">
        Esta es una simulación visual de la Isla Dinámica de iOS. En un entorno real, la aplicación se comunicaría con APIs del sistema para obtener el estado real de la batería.
    </div>

    <script>
        const dynamicIsland = document.getElementById('dynamicIsland');
        const batteryText = document.getElementById('batteryText');
        const expandedPercentage = document.getElementById('expandedPercentage');
        const progressFill = document.getElementById('progressFill');
        const chargingStatus = document.getElementById('chargingStatus');
        const batteryLevel = document.getElementById('batteryLevel');
        const animationSpeed = document.getElementById('animationSpeed');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        
        let chargingInterval = null;
        let isCharging = false;
        
        // Actualizar la visualización de la batería
        function updateBatteryDisplay(level) {
            batteryText.textContent = `${level}%`;
            expandedPercentage.textContent = `${level}%`;
            progressFill.style.width = `${level}%`;
            batteryLevel.value = level;
            
            // Cambiar color según el nivel
            if (level < 20) {
                progressFill.style.backgroundColor = '#ff453a';
            } else if (level < 80) {
                progressFill.style.backgroundColor = '#ffd60a';
            } else {
                progressFill.style.backgroundColor = '#30d158';
            }
        }
        
        // Expandir/contraer la isla dinámica
        function toggleIsland(expand) {
            if (expand) {
                dynamicIsland.classList.add('expanded');
                // Contraer automáticamente después de 3 segundos
                setTimeout(() => {
                    if (!isCharging) {
                        dynamicIsland.classList.remove('expanded');
                    }
                }, 3000);
            } else {
                dynamicIsland.classList.remove('expanded');
            }
        }
        
        // Iniciar la simulación de carga
        function startCharging() {
            if (isCharging) return;
            
            isCharging = true;
            chargingStatus.textContent = "Cargando...";
            toggleIsland(true);
            
            const speed = 11 - parseInt(animationSpeed.value); // Invertir la velocidad (mayor valor = más rápido)
            
            chargingInterval = setInterval(() => {
                let currentLevel = parseInt(batteryLevel.value);
                
                if (currentLevel < 100) {
                    currentLevel += 1;
                    updateBatteryDisplay(currentLevel);
                    
                    // Mostrar la isla expandida periódicamente
                    if (currentLevel % 25 === 0) {
                        toggleIsland(true);
                    }
                } else {
                    stopCharging();
                    chargingStatus.textContent = "Carga completa";
                    toggleIsland(true);
                }
            }, speed * 100);
        }
        
        // Detener la carga
        function stopCharging() {
            isCharging = false;
            clearInterval(chargingInterval);
            chargingStatus.textContent = "Conectado";
            setTimeout(() => toggleIsland(false), 3000);
        }
        
        // Event listeners
        startBtn.addEventListener('click', startCharging);
        
        stopBtn.addEventListener('click', () => {
            stopCharging();
            toggleIsland(true);
        });
        
        batteryLevel.addEventListener('input', () => {
            updateBatteryDisplay(parseInt(batteryLevel.value));
        });
        
        // Inicializar
        updateBatteryDisplay(0);
        
        // Simular notificación de carga al cargar la página
        setTimeout(() => {
            toggleIsland(true);
        }, 1000);
    </script>
</body>
</html>
